<h1>Administration</h1>

<% if not @is_admin then %>

  <p>Diese Seite kann nur von Administratoren aufgerufen werden</p>
  <%= link_to "weiter", users_path(@actual_user) %>
<% else %>
  <h2>Benutzer</h2>
  <table>
	  <tr>
	  	<th>Admin</th>
		<th>Name</th>
		<th>Klassenstufe</th>
		<th>Kontakt-Infos</th>
		<th>letzte Aktivität</th>
		<th>löschen</th>
		<th>Admin-Status ändern</th>
		<th>editieren</th>
	  </tr>
	  
	    <% @users.each do |user| %>
		<tr>
	      <td><% if user.is_admin then%>
			    <%= "ADMIN" %>
			  <% end %>
		  </td>
		  <td><%= user.name  %></td>
		  <td><%= user.class_level %></td>
		  <td><%= user.contact_info %></td>
		  <td><%= user.last_activity %></td>
          <td>
		    <% if user.id != 1 then %>
		      <%= link_to "delete", users_path(user), :method => :delete %>
			<% end %>   
		  </td>
		  <td>
		    <% if user.id != 1 then %>
		      <%= link_to "change", change_admin_status_path(user), :method => :patch %>
			<% end %> 
		  </td>
		  <td>
		    <%= link_to "edit", users_path(user) %>
		  </td>
		  	  
        </tr>
       <% end %>	  
	</table>

  <h2>Benutzer neu anlegen</h2>

  <%= form_tag admin_path, multipart: true do %>
  		Name: 
  		<%= text_field_tag :name %>
  		</br>
  		Passwort (min. 8 Zeichen):
  		<%= text_field_tag :password %>
  		</br>
  		</br>
  		Benutzer über CSV-Datei importieren (1. Zeile: Kopfzeile, 1. Spalte: Name, 2. Spalte: Passwort):
  		</br>
  		<%= file_field_tag :file %>
  		<%= submit_tag "Benutzer anlegen" %>
  <% end %>
	
<% end %>
